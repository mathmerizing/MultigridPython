\documentclass{article}
\thispagestyle{empty}

%Laden externer Dateien
\usepackage{import}
%Laden der Package-Konfigurationen
\import{../../../Documents/Latex/Preamble/}{pre_packages.tex}
%Lade die Klasse script
%\loadclass{script}

\usepackage{listings}

%Definiere Counter /numctr zur Nummerierung von equations
\newcounter{numctr}
%FÃ¼ge /section in die Reset-Liste von /numctr hinzu
\makeatletter
\@addtoreset{numctr}{section}
\makeatother

%Math-Umgebungen werden umbrechbar
\allowdisplaybreaks

\pgfplotsset{compat=1.16}

\def\I{\mathbb}


% plotting
\usepackage{pgf,tikz,pgfplots}
\usepackage{mathrsfs}
\usetikzlibrary{arrows}

\usepackage{tikz-cd} 
\usepackage{xcolor}
\usepackage{svg}

\usepackage{hyperref}
\hypersetup{linktoc=all, linkcolor=blue}

% define div operator
\DeclareMathOperator{\diverg}{div}
% define curl operator
\DeclareMathOperator{\curl}{curl}
% define restriction of function
\newcommand\restrict[1]{\raisebox{-.5ex}{$|$}_{#1}}


\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.96}
\definecolor{lightgray}{rgb}{1,1,1}
 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{lightgray},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{blue},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    xleftmargin=3pt
}
 
\lstset{style=mystyle}


\begin{document}

\pagestyle{plain}
\lstset{language=Python}
\begin{lstlisting}[mathescape=true]
def MGM($l,\boldsymbol{x_l^k},\boldsymbol{b_l}$): 
	# 1. Apply $\nu$ smoothing steps of an iterative method $\boldsymbol{S}$.
	$\boldsymbol{x_l^{k,1}} = \boldsymbol{S}^{\nu}\boldsymbol{x_l^{k}}$			# PRE - SMOOTHING
	
	# 2. Restrict defect to coarse grid.
	$\boldsymbol{d_{l-1}} = I_l^{l-1}(\boldsymbol{b_{l}} - A_l\boldsymbol{x_{l}^{k,1}})$			# $I_l^{l-1}$ := restriction operator
	
	# 3. Coarse grid solution.
	if l == 1:
		$\boldsymbol{y_{0}} = A_0^{-1}\boldsymbol{d_{0}}$ 		# direct solver on coarsest grid
	else:	# l > 1
		$\boldsymbol{y_{l-1}} = \boldsymbol{0}$
		for i in range($\mu$):
			$\boldsymbol{y_{l-1}} = $ MGM($l-1,\boldsymbol{y_{l-1}},\boldsymbol{d_{l-1}}$)
	
	# 4. Coarse grid correction.
	$\boldsymbol{x_l^{k,2}} = \boldsymbol{x_l^{k,1}} + I_{l-1}^{l}\boldsymbol{y_{l-1}}$			 # $I_{l-1}^{l}$ := prolongation operator
	
	# 5. Apply $\nu$ smoothing steps of an iterative method $\boldsymbol{S}$.
	$\boldsymbol{x_l^{k,3}} = \boldsymbol{S}^{\nu}\boldsymbol{x_l^{k,2}}$			# POST - SMOOTHING
	
	return $\boldsymbol{x_l^{k+1}} := \boldsymbol{x_l^{k,3}}$
\end{lstlisting}
\end{document}